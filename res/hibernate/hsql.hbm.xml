<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="org.pentaho.pac.common.datasources.PentahoDataSource" table="DATASOURCE">
      <cache usage="read-write"/>
	  <id column="NAME" name="name" type="string" length="50">
	  	<generator class="assigned" />
	  </id>
      <property name="maxActConn" type="int" not-null="true">
        <column name="MAXACTCONN"  not-null="true" />
      </property>
      <property name="driverClass" type="string" not-null="true">
        <column name="DRIVERCLASS" length="50" not-null="true" />
      </property>
      <property name="idleConn" type="int" not-null="true">
        <column name="IDLECONN"  not-null="true" />
      </property>
      <property name="userName" type="string" not-null="true">
        <column name="USERNAME" length="50" not-null="true" />
      </property>
      <property name="password" type="string" not-null="true">
        <column name="PASSWORD" length="150" not-null="true" />
      </property>
      <property name="url" type="string" not-null="true">
        <column name="URL" length="100" not-null="true" />
      </property>
      <property name="query" type="string" not-null="true">
        <column name="QUERY" length="100" not-null="true" />
      </property>
      <property name="wait" type="long" not-null="true">
        <column name="WAIT"  not-null="true" />
      </property>      
    </class>
    <class name="org.pentaho.pac.server.PentahoRole" table="AUTHORITIES">
        <id name="name" type="java.lang.String">
            <column name="AUTHORITY" />
            <generator class="assigned" />
        </id>
        <property name="description" type="java.lang.String">
            <column name="DESCRIPTION" length="100" />
        </property>
        <set name="assignedUsers" table="GRANTED_AUTHORITIES">
        	<key column="AUTHORITY"/>
        	<many-to-many column="USERNAME" class="org.pentaho.pac.server.PentahoUser"/>
        </set>
    </class>
        <class name="org.pentaho.pac.server.PentahoUser" table="USERS">
        <id name="name" type="java.lang.String">
            <column name="USERNAME" />
            <generator class="assigned" />
        </id>
        <property name="password" type="java.lang.String">
            <column name="PASSWORD" length="50" not-null="true" />
        </property>
        <property name="description" type="java.lang.String">
            <column name="DESCRIPTION" length="128" not-null="true" />
        </property>
        <property name="enabled">
            <column name="ENABLED" not-null="true" />
        </property>
        <set name="assignedRoles" table="GRANTED_AUTHORITIES" inverse="true">
        	<key column="USERNAME"/>
        	<many-to-many column="AUTHORITY" class="org.pentaho.pac.server.PentahoRole"/>
        </set>
    </class>    
</hibernate-mapping>